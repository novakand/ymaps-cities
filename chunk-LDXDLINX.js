import{a as re}from"./chunk-Q6QLJMDO.js";import{a as Z,c as te,f as ne}from"./chunk-TEUI6FRN.js";import{A as $,Sa as A,Ta as K,Va as v,bb as N,cb as U,db as Y,e as z,gb as G,hb as J,i as q,mb as Q,ob as X,pb as ee,qb as ie}from"./chunk-22QDKRRG.js";import{Bb as f,Bc as O,C as M,G as F,J as R,Kb as i,Kc as E,Lb as r,Mb as H,Nb as C,Ob as S,Qb as _,Tb as g,Ub as h,V as B,Ya as p,bb as s,dc as l,fc as y,gc as W,hc as k,i as w,ic as V,jb as P,jc as D,ka as m,kc as L,la as d,pb as u,wc as I,za as j}from"./chunk-I5INVV6P.js";function se(t,x){if(t&1){let e=_();i(0,"p-button",12),g("click",function(){m(e);let n=h(2);return d(n.toggleSideBar())}),r()}t&2&&f("rounded",!0)("text",!0)}function le(t,x){if(t&1){let e=_();C(0),i(1,"div",7)(2,"div",8),l(3,"\u0413\u043E\u0440\u043E\u0434"),r(),i(4,"div",9),u(5,se,1,2,"p-button",10),i(6,"p-button",11),g("click",function(){m(e);let n=h();return d(n.onClose())}),r()()(),S()}if(t&2){let e=h();p(5),f("ngIf",e.isSmallScreen),p(),f("rounded",!0)("text",!0)}}function pe(t,x){if(t&1&&(C(0),i(1,"div",13)(2,"div",14)(3,"span",15),l(4,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),r(),i(5,"span",15),l(6),r()(),i(7,"div",14)(8,"span",15),l(9,"id "),r(),i(10,"span",15),l(11),r()(),i(12,"div",14)(13,"span",15),l(14,"\u041A\u043E\u043E\u0440\u0434\u0438\u043D\u0430\u0442\u044B"),r(),i(15,"span",16),l(16),r()()(),S()),t&2){let e=h();p(6),y(" ",(e.item==null?null:e.item.name)||"-"," "),p(5),y(" ",(e.item==null?null:e.item.id)||"-"," "),p(5),W(" ",e.item==null||e.item.center==null?null:e.item.center[1],", ",e.item==null||e.item.center==null?null:e.item.center[0]," ")}}function me(t,x){t&1&&(i(0,"div",17)(1,"span",18),l(2,"Route"),r()())}var je=(()=>{class t{constructor(e,o,n,c,b,a,oe,ae){this._fb=e,this._cdr=o,this.citiesService=n,this.router=c,this._loadProgressService=b,this.mapService=a,this.breakpointObserver=oe,this.layoutService=ae,this._isMapSidebar=j(!0),this.isVisibleRoute=!1,this.data={},this.isVisible=!0,this.points=[{name:"-",coordinates:[],icon:"from",type:"loading"},{name:"-",coordinates:[],icon:"to",type:"unloading"}],this._getTrack$=new w,this._destroy$=new w,this.isMapSidebar=E(()=>this._isMapSidebar()),this.containerClass=E(()=>({"sidebar-active":this.isMapSidebar()})),this._buildForm(),this._watchForFormValueChanges(),this.breakpointObserver.observe(["(min-width: 992px)","(max-width: 767px)"]).pipe(R(100)).subscribe(T=>{this.isLargeScreen=T.breakpoints["(min-width: 992px)"],this.isSmallScreen=T.breakpoints["(max-width: 767px)"],this._cdr.detectChanges()})}onClose(){this.isVisible=!1,this.onHide(),this._cdr.markForCheck()}toggleSideBar(){this.layoutService.toggleSideBar()}_watchForFormValueChanges(){this.form.valueChanges.pipe(M(()=>this.form.valid),F(600),B(()=>this._getTrack$.next(this.form.value))).subscribe()}ngOnInit(){this.getById()}getById(){this.citiesService.getById(this.id).subscribe(e=>{e&&(this.item=e,this.mapService.focusCity$.next({bbox:e.bbox,center:e.center}),this._cdr.markForCheck())})}onHide(){this.router.navigate(["/"])}ngOnDestroy(){this._destroy$.next(!0),this._destroy$.complete(),this._cdr.markForCheck()}onRoutes(){this.isVisibleRoute=!this.isVisibleRoute}_buildForm(){let e=new Date,o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);this.form=this._fb.group({start:[{value:o,disabled:!0},[v.required]],end:[{value:e,disabled:!0},[v.required]],isRepeat:[!0,[v.required]]})}static{this.\u0275fac=function(o){return new(o||t)(s(N),s(O),s(te),s($),s(ie),s(Z),s(ne),s(ee))}}static{this.\u0275cmp=P({type:t,selectors:[["app-cities-detail"]],inputs:{id:"id"},features:[L([])],decls:11,vars:3,consts:[["header",""],["modal","false","appendTo","","styleClass","border-none p-drawer-bottom-append","position","bottom","showCloseIcon","false",3,"visibleChange","onHide","visible"],[1,"grid"],[1,"col-span-12","lg:col-span-12","h-full"],[1,"grid","grid-cols-12","gap-4"],[4,"ngIf"],["modal","false","appendTo","","styleClass","border-none p-drawer-bottom-append","position","bottom","showCloseIcon","true",3,"visibleChange","visible"],[1,"flex","items-center","justify-between","w-full","mb-0","gap-2"],[1,"text-900","text-xl","font-semibold","whitespace-nowrap"],[1,"flex","items-center","ml-auto"],["class","text-xl","badgeSeverity","contrast","size","large","icon","pi pi-map",3,"rounded","text","click",4,"ngIf"],["badgeSeverity","contrast","size","large","icon","pi pi-times",1,"text-xl","ml-4",3,"click","rounded","text"],["badgeSeverity","contrast","size","large","icon","pi pi-map",1,"text-xl",3,"click","rounded","text"],[1,"col-span-12"],[1,"flex","justify-between","items-center","mb-3"],[1,"font-semibold"],[1,"font-semibold",2,"overflow","hidden","text-overflow","ellipsis","white-space","nowrap","max-width","285px"],[1,"flex","align-center","justify-between","mb-0"],[1,"text-900","text-xl","font-semibold"]],template:function(o,n){if(o&1){let c=_();i(0,"p-drawer",1),D("visibleChange",function(a){return m(c),V(n.isVisible,a)||(n.isVisible=a),d(a)}),g("onHide",function(){return m(c),d(n.onHide())}),u(1,le,7,3,"ng-template",null,0,I),i(3,"div",2)(4,"div",3)(5,"div",4),u(6,pe,17,4,"ng-container",5),r()()()(),i(7,"p-drawer",6),D("visibleChange",function(a){return m(c),V(n.isVisibleRoute,a)||(n.isVisibleRoute=a),d(a)}),u(8,me,3,0,"ng-template",null,0,I),H(10,"div"),r()}o&2&&(k("visible",n.isVisible),p(6),f("ngIf",n.data),p(),k("visible",n.isVisibleRoute))},dependencies:[q,z,J,G,K,A,X,re,U,Y,Q],styles:['@charset "UTF-8";  .p-drawer-bottom-append{bottom:0!important;position:absolute!important;left:0!important;width:100%!important;height:100%!important}  .p-timeline-event-marker:before{background:transparent}  .p-timeline-event-separator{top:16px;position:relative}  .p-timeline-event-opposite{padding:0;max-width:0}  .full-screen-datepicker{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;margin:0!important;padding:0!important;box-shadow:none!important;z-index:10000!important}  .full-screen-datepicker .p-datepicker{height:100%!important;display:flex;flex-direction:column}  .full-screen-datepicker .p-datepicker-calendar{flex:1;overflow:auto}  .full-screen-datepicker .p-datepicker-titlebar,   .full-screen-datepicker .p-datepicker-footer{flex-shrink:0}  .p-timeline-routes .p-timeline-event-separator{top:18px;position:relative}  .p-timeline-routes .p-timeline-event-opposite{display:none}'],changeDetection:0})}}return t})();export{je as CitiesDetailComponent};
